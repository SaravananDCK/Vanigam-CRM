@layout LoginLayout
@page "/resetpassword/{UserId}/{Token}"
@using Vanigam.Accounting.Objects.Models
@using Vanigam.Accounting.Client.Validators
@using Microsoft.Extensions.Localization
@using Vanigam.Accounting.Objects
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager
@inject IStringLocalizer<ResetPassword> Localizer
<h3>@Localizer["ResetPassword"]: <RadzenText class="rz-color-primary"><b> @User?.Email </b></RadzenText></h3>

@* <EditForm Model="@resetPasswordModel" OnValidSubmit="SubmitForm">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <InputText @bind-Value="resetPasswordModel.Password" placeholder="New Password" />
        <InputText @bind-Value="resetPasswordModel.ConfirmPassword" placeholder="Confirm Password" />
        <button type="submit">Submit</button>
    </EditForm> *@
<RadzenTemplateForm Method="post" Submit="@SubmitForm" TItem="ResetPasswordModel" Data="@ResetPasswordModel">
    @* <RadzenAlert Size="AlertSize.Large" Shade="Shade.Light" AlertStyle="AlertStyle.Danger" Variant="Variant.Flat" Title="Cannot change password" Visible="@errorVisible">@error</RadzenAlert>
            <RadzenAlert Size="AlertSize.Large" Shade="Shade.Light" AlertStyle="AlertStyle.Success" Variant="Variant.Flat" Visible="@successVisible">
                @Localizer["PasswordChanged"]
        </RadzenAlert> *@
    <FluentValidationValidator Validator="new ResetPasswordModelValidator(Localizer)" />
    <ValidationSummary />
    <RadzenStack Style="margin-bottom: 1rem;">
        <RadzenAlert Variant="@Variant.Flat" AlertStyle="@AlertStyle.Info" Size="@AlertSize.Small" Shade="Shade.Lighter" AllowClose=false>
            Passwords must be at least 6 characters., <br />
            Passwords must have at least one non alphanumeric character., <br />
            Passwords must have at least one digit ('0'-'9')., <br />
            Passwords must have at least one uppercase ('A'-'Z')..<br />
        </RadzenAlert>
        <VanigamAccountingFormField Text=@Localizer["NewPassword"] Variant="Variant.Outlined">
            <ChildContent>
                <RadzenPassword @bind-Value="@ResetPasswordModel.Password" Style="display: block; width: 100%" Name="NewPassword" />
            </ChildContent>
        </VanigamAccountingFormField>
        <VanigamAccountingFormField Text=@Localizer["ConfirmPassword"] Variant="Variant.Outlined">
            <ChildContent>
                <RadzenPassword @bind-Value="@ResetPasswordModel.ConfirmPassword" Style="display: block; width: 100%" Name="ConfirmPassword" />
            </ChildContent>
        </VanigamAccountingFormField>
    </RadzenStack>
    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End">
        <RadzenButton ButtonType="ButtonType.Submit" Text=@Localizer["Changepassword"] Variant="Variant.Flat" @bind-IsBusy="IsBusy" />
    </RadzenStack>
</RadzenTemplateForm>
